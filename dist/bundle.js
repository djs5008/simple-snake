!function(e){var t={};function s(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,s),o.l=!0,o.exports}s.m=e,s.c=t,s.d=function(e,t,i){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)s.d(i,o,function(t){return e[t]}.bind(null,o));return i},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=0)}([function(e,t,s){"use strict";s.r(t);class i{constructor(e,t){this.x=e,this.y=t}}class o{constructor(e,t){this.origin={x:e,y:t},this.respawn()}grow(){this.body.push(new i(this.body[0].x,this.body[0].y))}setDirection(e,t){this.speedX=e===-1*this.speedX?this.speedX:e,this.speedY=t===-1*this.speedY?this.speedY:t}move(e,t){let s=this.body[0],i=s.x+this.speedX,o=s.y+this.speedY;if(i<t.x&&o<t.y)if(i>=e.x&&o>=e.y){for(let e=this.body.length-1;e>0;e--)this.body[e].x=this.body[e-1].x,this.body[e].y=this.body[e-1].y;s.x=i,s.y=o}else this.respawn();else this.respawn();for(let e=1;e<this.body.length;e++)if(s.x===this.body[e].x&&s.y===this.body[e].y)return void this.respawn()}respawn(){this.speedX=0,this.speedY=0,this.body=[],this.body.push(new i(this.origin.x,this.origin.y))}}class r{constructor(e,t){this.x=e,this.y=t,this.hue=0}}const h=500,n=500,a=75,d=20,f=h/d,c=n/d;document.body.onload=(()=>{console.log("Starting game..."),new class{constructor(){this.stage=new createjs.StageGL("game"),this.buffer=new createjs.Shape,this.snake=new o(Math.floor(f/2),Math.floor(c/2)),this.food=void 0,this.stage.addChild(this.buffer),createjs.Ticker.on("tick",this.draw.bind(this)),createjs.Ticker.framerate=60,document.onkeydown=this.handleKeyPressed.bind(this),setInterval(()=>{this.update()},a)}handleKeyPressed(e){switch(e.keyCode){case 38:this.snake.setDirection(0,-1);break;case 40:this.snake.setDirection(0,1);break;case 37:this.snake.setDirection(-1,0);break;case 39:this.snake.setDirection(1,0)}}spawnFood(){let e=Math.floor(Math.random()*f),t=Math.floor(Math.random()*c),s=!1;this.snake.body.forEach(i=>{e!==i.x||t!==i.y||(s=!0)}),s?setTimeout(()=>{this.spawnFood()},0):this.food=new r(e,t)}update(){null==this.food?this.spawnFood():this.snake.body[0].x===this.food.x&&this.snake.body[0].y===this.food.y&&(this.food=void 0,this.snake.grow());let e={x:f,y:c};this.snake.move({x:0,y:0},e)}draw(){this.buffer.graphics.clear(),this.buffer.graphics.beginFill("black"),this.buffer.graphics.drawRect(0,0,h,n),this.buffer.graphics.endFill();let e=1;this.snake.body.forEach(t=>{this.buffer.graphics.beginFill("rgba(255,255,255,"+e+")"),this.buffer.graphics.drawRect(t.x*d,t.y*d,d,d),this.buffer.graphics.endFill(),e-=1/(this.snake.body.length+this.snake.body.length/5)}),null!=this.food&&(this.buffer.graphics.beginFill("hsl("+this.food.hue+", 100%, 50%)"),this.buffer.graphics.drawRect(this.food.x*d,this.food.y*d,d,d),this.buffer.graphics.endFill(),this.food.hue=this.food.hue+2),this.buffer.cache(0,0,h,n),this.stage.update()}}})}]);